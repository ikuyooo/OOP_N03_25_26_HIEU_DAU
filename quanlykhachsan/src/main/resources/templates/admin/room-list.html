<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout}" lang="vi">

<head>
    <title>Danh s√°ch ph√≤ng</title>
</head>

<body>
    <div layout:fragment="content">
        
        <h1 class="dashboard-title">üìã Danh s√°ch t·∫•t c·∫£ ph√≤ng</h1>

        <div class="d-flex justify-content-between mb-3">
            <a th:href="@{/rooms/new}" class="btn btn-success">
                <i class="bi bi-plus-square"></i> Th√™m ph√≤ng m·ªõi
            </a>
            <a th:href="@{/rooms/dashboard}" class="btn btn-info text-white">
                <i class="bi bi-grid-fill"></i> Xem S∆° ƒë·ªì ph√≤ng
            </a>
        </div>

        <div th:if="${#lists.isEmpty(rooms)}" class="alert alert-info">
            Ch∆∞a c√≥ ph√≤ng n√†o ƒë∆∞·ª£c t·∫°o.
        </div>

        <table th:unless="${#lists.isEmpty(rooms)}" class="table table-striped table-hover align-middle bg-white shadow-sm">
            <thead class="bg-light">
                <tr>
                    <th scope="col">M√£ ph√≤ng</th>
                    <th scope="col">Lo·∫°i</th>
                    <th scope="col">Gi√° (VNƒê)</th>
                    <th scope="col">Tr·∫°ng th√°i</th>
                    <th scope="col">M√¥ t·∫£</th>
                    <th scope="col">Thao t√°c</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="room : ${rooms}">
                    <td class="fw-bold" th:text="${room.code}">101</td>
                    <td th:text="${room.type}">DBL</td>
                    <td th:text="${#numbers.formatDecimal(room.price, 0, 'COMMA', 0, 'POINT')}">1500000</td>
                    
                    <td>
                        <span th:class="|badge rounded-pill text-bg-
                                ${room.status == 'VACANT' ? 'success' : 
                                room.status == 'OCCUPIED' ? 'danger' : 
                                room.status == 'CLEANING' ? 'warning' : 'secondary'}|"
                              th:text="${room.status}">
                            VACANT
                        </span>
                    </td>
                    
                    <td th:text="${#strings.substring(room.description, 0, #strings.length(room.description) > 50 ? 50 : #strings.length(room.description)) + (#strings.length(room.description) > 50 ? '...' : '')}">
                        M√¥ t·∫£ ph√≤ng...
                    </td>

                    <td class="d-flex gap-2">
                        <a th:href="@{/rooms/edit/{id}(id=${room.id})}" class="btn btn-sm btn-warning">
                            <i class="bi bi-pencil"></i> S·ª≠a
                        </a>
                        
                        <form th:action="@{/rooms/delete/{id}(id=${room.id})}" method="post" 
                              onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a ph√≤ng ' + [[${room.code}]] + ' kh√¥ng?');">
                            <button type="submit" class="btn btn-sm btn-danger">
                                <i class="bi bi-trash"></i> X√≥a
                            </button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
        
    </div>
</body>
</html>